#ifndef FILERX_H
#define FILERX_H

#include "bool.h"
#include "Wimp.h"

#include "FS.h"
#include "Icon.h"
#include "Tools.h"
#include "FSParameters.h"

#define UNUSED(x) (void)x

char *strdup(const char *src);

extern unsigned task_handle;
extern unsigned pollword;
extern bool     sharefs;

#define Pollword_FS    0x01
#define Pollword_Drive 0x02
#define Pollword_Icon  0x04



#define DriveFlags_Present 1
#define DriveFlags_IconBar 2

extern FS *fses;

extern Icon *icons;


/*******************************************************************
 Function:      fsdrive_tool_capable
 Description:   Check if we can invoke the external tools for this drive
 Parameters:    fs-> the FS to invoke on
                drive = the drive number
                tooloperation = the operation to perform
 Returns:       true if we can use this tool, false if we cannot
 ******************************************************************/
bool fsdrive_tool_capable(FS *fs, int drive,
                          tooloperation_t tooloperation);

/*******************************************************************
 Function:      fsdrive_tool_invoke
 Description:   Invoke one of the external tools.
 Parameters:    fs-> the FS to invoke on
                drive = the drive number
                tooloperation = the operation to perform
 Returns:       pointer to error, or NULL if successful
 ******************************************************************/
_kernel_oserror *fsdrive_tool_invoke(FS *fs, int drive,
                                     tooloperation_t tooloperation);

/*******************************************************************
 Function:      fsdrive_share
 Description:   Share (or unshare) a drive.
 Parameters:    fs-> the FS to invoke on
                drive = the drive number
                sharetype = How to share
 Returns:       pointer to error, or NULL if successful
 ******************************************************************/
_kernel_oserror *fsdrive_share(FS *fs, int drive,
                               ShareType sharetype);

#endif
