#ifndef FILERX_H
#define FILERX_H

#ifdef NO_STDBOOL
#ifndef BOOL_DEFINED
#define BOOL_DEFINED
typedef enum {false, true} bool;
#endif
#else
#include <stdbool.h>
#endif
#include "Wimp.h"

#include "Icon.h"


#define UNUSED(x) (void)x

char *strdup(const char *src);

extern unsigned task_handle;

extern unsigned pollword;

#define Pollword_FS    0x01
#define Pollword_Drive 0x02
#define Pollword_Icon  0x04

typedef struct
{
    unsigned    flags;
    char        discname[12];
    const char *validation;
    int         baricon;
} Drive;

#define DriveFlags_Present 1
#define DriveFlags_IconBar 2

typedef struct FS_s
{
    char      module[12];
    char      name[8];
    bool      fd_names;
    Drive     drive[8];

    struct FS_s *next;
} FS;

extern FS *fses;

extern Icon *icons;

/*******************************************************************
 Function:      icon_position
 Description:   Determines where to put an icon on the icon bar. Icon
                and pos will be updated with the icon to create next to
                or the priority. Pos will be set to the positon io the
                icobar. These values can be used with Wimp_CreateIcon.
 Parameters:    drive =  drive to create the icon far
                icon  => icon handle or priority
                pos   => position
                swinum_describe = SWI to describe the disc
                buffer-> disc name buffer to fill (at least 11 bytes)
 Returns:       Nowt.
 ******************************************************************/
void icon_position(Drive *drive, int *pos, int *icon);

#endif
